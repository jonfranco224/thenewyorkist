---
import Layout from "../components/Layout.astro";
import { getCollection } from "astro:content";

const allPosts = await getCollection("articles"); // Adjust collection name if needed
const [firstPost, ...posts] = allPosts
---

<Layout>
	<div class="container mx-auto">
		<section class="border-b py-5 md:py-5 mb-5 flex flex-col lg:flex-row">
			<a
				href={`/articles/${firstPost?.slug}`}
				class="flex w-full lg:w-[75%] lg:pr-6"
			>
				<article class="flex flex-col md:flex-row gap-5">
					<img
						class="flex-1 md:aspect-[7/5] object-cover overflow-hidden"
						src={firstPost?.data.image.src}
						alt={firstPost?.data.image.alt}
					/>
					<div class="md:flex-1 lg:py-[1px]">
						<div class="w-full max-w-full lg:max-w-[500px]">
							<small class="block w-max text-extra-small uppercase bold italic">{firstPost?.data?.category}</small>
							<p class="h3 pt-3 pb-2 text-gray-800 font-bold">
								{firstPost?.data.title}
							</p>
							<p class="small pb-2 text-[var(--dark-gray)]">{firstPost?.data.description}</p>
							<div class="flex items-start pt-2 text-extra-small italic">
								By Ivanna Dover
							 </div>
						</div>
					</div>
				</article>
			</a>
			<div class="bordr-l-0 lg:border-l px-0 lg:pl-6 w-full lg:w-[25%] mt-5 lg:mt-0 lg:mb-5 lg:my-0">
				<!-- <p class="small font-bold pb-2">Spotlight</p> -->
				<div class="flex flex-col md:flex-row lg:flex-col gap-0 md:gap-4 lg:gap-0">
					<div class="flex-1 flex flex-col border-0 md:border-r lg:border-0 pr-5 lg:pr-0">
						<a href="/" class="h-[50%] border-b py-3 lg:pt-0">
							<small class="pb-1 block w-max text-[12px] lg:text-[10px] uppercase bold italic">The Beat</small>
							<p class="text-[14px] lg:text-[13px] !leading-[1.4] lg:!leading-[1.25] text-gray-800 font-bold">
								Barnes & Noble Introduces New 1,035 Screen eReader, the Nook Book
							</p>
						</a>
						<a href="/" class="h-[50%] border-b md:border-0 lg:border-b py-3">
							<small class="pb-1 block w-max text-[12px] lg:text-[10px] uppercase bold italic">Arts</small>
							<p class="text-[14px] lg:text-[13px] !leading-[1.4] lg:!leading-[1.25] text-gray-800 font-bold">
								Electric Daisy Carnival Prompts Amber Alert for “Molly”
							</p>
						</a>
					</div>
					<div class="flex-1 flex flex-col">
						<a href="/" class="h-[50%] py-3 border-b">
							<small class="pb-1 block w-max text-[12px] lg:text-[10px] uppercase bold italic">NEWS</small>
							<p class="text-[14px] lg:text-[13px] !leading-[1.4] lg:!leading-[1.25] text-gray-800 font-bold">
								The 19th Annual Race for the Cure Might Be Closest Race Yet
							</p>
						</a>
						<a href="/" class="h-[50%] py-3 lg:pb-0">
							<small class="pb-1 block w-max text-[12px] lg:text-[10px] uppercase bold italic">OPINION</small>
							<p class="text-[14px] lg:text-[13px] !leading-[1.4] lg:!leading-[1.25] text-gray-800 font-bold">
								New Research Shows That Marijuana Gets You Pretty High
							</p>
						</a>
					</div>	
				</div>
			</div>
		</section>
		
		<!-- <p class="h2 mb-10 md:mb-5">Spotlight</p> -->
		<section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 md:gap-5 pb-5 md:pb-5 border-b">
			{
				[posts[0], posts[1], posts[2], posts[3]].map((post) => (
					<a
						href={`/articles/${post.slug}`}
						class="flex flex-col"
					>
						<img
							class="w-full aspect-video lg:aspect-[7/5] object-cover overflow-hidden"
							src={post.data.image.src}
							alt={post.data.image.alt}
						/>
						<div class="flex flex-col flex-1">
							<p class="text-[18px] font-bold !leading-[1.3] pt-3.5 pb-3">
                {post.data.title}
              </p>
							<p class="small leading-[1.4] text-[rgb(68,68,68)] pb-4">{post.data.description}</p>
							<div class="flex items-start text-extra-small italic mt-auto">
								By {post.data.author} <span class="inline-block text-[rgb(68,68,68)] px-2">|</span> 1 minute read
							</div>
						</div>
					</a>
				))
			}
		</section>
		
		<div class="py-5 md:py-5">
			<section class="bg-[rgb(11,12,18)]">
				<a
					href={`/articles/${firstPost?.slug}`}
					class="bg-white shadow-md rounded-lg overflow-hidden"
				>
					<article class="flex flex-col-reverse md:flex-row">
						<div class="md:w-[50%] flex items-center p-[30px] md:p-[50px] lg:p-[40px]">
							<div class="max-w-[450px] m-auto">
								<p class="h2 pt-3 pb-2 text-white">
									{firstPost?.data.title}
								</p>
								<div class="flex items-start text-white">
									 <small class="opacity-[.7]">Ivanna Dover <span class="px-1">&bull;</span> January 8th, 2025</small>
								</div>
								<p class="text-sm py-2 text-white">{firstPost?.data.description}</p>
							</div>
						</div>
						<div class="flex md:w-[50%]">
							<img
								class="h-full md:aspect-[7/5] object-cover overflow-hidden"
								src={firstPost?.data.image.src}
								alt={firstPost?.data.image.alt}
							/>
						</div>
					</article>
				</a>
			</section>
		</div>
	</div>
</Layout>
