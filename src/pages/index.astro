---
import Layout from "../components/Layout.astro";
import { getCollection } from "astro:content";

const allPosts = await getCollection("articles"); // Adjust collection name if needed
const [firstPost, ...posts] = allPosts
---

<Layout>
	
	<div class="container mx-auto">
		
		<section class="border-b py-5 md:py-10 mb-10 md:mb-10 flex flex-col xl:flex-row">
			<a
				href={`/articles/${firstPost?.slug}`}
				class="overflow-hidden w-full xl:w-[80%] xl:pr-20"
			>
				<article class="flex flex-col md:flex-row gap-5">
					<img
						class="flex-1 md:aspect-[7/5] object-cover overflow-hidden"
						src={firstPost?.data.image.src}
						alt={firstPost?.data.image.alt}
					/>
					<div class="flex-1 lg:pt-[20px]">
						<small class="block w-max text-extra-small uppercase bold italic">{firstPost?.data?.category}</small>
						<p class="h2 pt-3 pb-2 text-gray-800 font-bold">
              {firstPost?.data.title}
            </p>
						<p class="small pb-2 text-[rgb(68,68,68)]">{firstPost?.data.description}</p>
						<div class="flex items-start pt-2 text-extra-small italic">
							By Ivanna Dover
					 	</div>
					</div>
				</article>
			</a>
			<div class="w-full xl:w-[20%] outline mt-10 xl:mt-5 mb-5 xl:my-0 p-3">
				<p>AD or Latest News</p>
			</div>
		</section>
		
		<p class="h1 mb-10 md:mb-5">Spotlight</p>
		<section class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-10 md:gap-5 pb-5 md:pb-10">
			{
				[posts[0], posts[1], posts[2], posts[3]].map((post) => (
					<a
						href={`/articles/${post.slug}`}
						class="flex flex-col"
					>
						<img
							class="w-full aspect-[7/5] object-cover overflow-hidden"
							src={post.data.image.src}
							alt={post.data.image.alt}
						/>
						<div class="flex flex-col flex-1">
							<p class="h6 font-bold !leading-[1.3] pt-3.5 pb-3">
                {post.data.title}
              </p>
							<p class="small leading-[1.4] text-[rgb(68,68,68)] pb-4">{post.data.description}</p>
							<div class="flex items-start text-extra-small italic mt-auto">
								By {post.data.author} <span class="inline-block text-[rgb(68,68,68)] px-2">|</span> 1 minute read
							</div>
						</div>
					</a>
				))
			}
		</section>
		
		<div class="py-5 md:py-10">
			<section class="mb-5 md:mb-10 bg-[rgb(11,12,18)]">
				<a
					href={`/articles/${firstPost?.slug}`}
					class="bg-white shadow-md rounded-lg overflow-hidden"
				>
					<article class="flex flex-col-reverse md:flex-row">
						<div class="md:w-[50%] flex items-center p-[30px] md:p-[50px] lg:p-[80px]">
							<div class="max-w-[450px] m-auto">
								<p class="h2 pt-3 pb-2 text-white">
									{firstPost?.data.title}
								</p>
								<div class="flex items-start text-white">
									 <small class="opacity-[.7]">Ivanna Dover <span class="px-1">&bull;</span> January 8th, 2025</small>
								</div>
								<p class="text-sm py-2 text-white">{firstPost?.data.description}</p>
							</div>
						</div>
						<div class="flex md:w-[50%]">
							<img
								class="h-full md:aspect-[7/5] object-cover overflow-hidden"
								src={firstPost?.data.image.src}
								alt={firstPost?.data.image.alt}
							/>
						</div>
					</article>
				</a>
			</section>
		</div>
		
		<p class="h1 bold mb-5">Arts & Entertainment</p>
	</div>
</Layout>
